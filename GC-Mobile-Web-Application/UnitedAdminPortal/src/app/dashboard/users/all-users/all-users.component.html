
<p-progressSpinner *ngIf="loader"></p-progressSpinner>

<div class="row mt-5 d-flex justify-content-center" *ngIf="noData">
  <div class="col-5">
    <p-card>
      <p>No Users have been registered yet.</p>
    </p-card>
  </div>
</div>

<div class="container p-5  table-wrapper" *ngIf="!loader && !noData">
  <p-toast></p-toast>
  <div class="parent-table-users row p-0">
    <div class="col-12 p-0">
      <h1>Regular Users</h1>

      <p-table [value]="allUsers" class="allEventsTable" [scrollable]="true"
               [paginator]="true" [rows]="25" [showCurrentPageReport]="true" [totalRecords]="allUsers.length"
               currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries" [rowsPerPageOptions]="[25,50,100]">
        <ng-template pTemplate="colgroup" let-columns>
          <colgroup>
            <col style="width:100px">
            <col style="width:150px">
            <col style="width:150px">
<!--            <col style="width:250px">-->
<!--            <col style="width:250px">-->
            <col style="width:150px">
<!--            <col style="width:250px">-->
<!--            <col style="width:250px">-->
            <col style="width:150px">
            <col style="width:150px">
            <col style="width:250px">
          </colgroup>
        </ng-template>
        <ng-template pTemplate="header">
          <tr>
            <th></th>
            <th>Name</th>
<!--            <th>Last Name</th>-->
<!--            <th>Username</th>-->
<!--            <th>Password</th>-->
            <th>Street Address</th>
            <th>City</th>
            <th>Country</th>
            <th>Zip Code</th>
<!--            <th>Contact Number</th>-->
            <th>Email</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-user>
          <tr>
            <td>
              <button pButton type="button"  icon="pi pi-user-edit" class="p-button-raised p-button-rounded p-button-success" (click)="openNew(user)"></button>
              <button pButton type="button"  icon="pi pi-trash" class="p-button-raised p-button-rounded ml-2 p-button-danger" (click)="deleteUser(user)"></button>
            </td>
            <td>{{user.FirstName}}</td>
<!--            <td>{{user.LastName}}</td>-->
<!--            <td>{{user.username}}</td>-->
<!--            <td>{{user.password}}</td>-->
            <td>{{user.StreetAddress}}</td>
            <td>{{user.City}}</td>
            <td>{{user.Country}}</td>
            <td>{{user.ZipCode}}</td>
<!--            <td>{{user.ContactNumber}}</td>-->
            <td>{{user.Email}}</td>

          </tr>
        </ng-template>
      </p-table>

      <p-dialog [(visible)]="userDialog" [style]="{width: '450px'}" header="Edit User" [modal]="true" styleClass="p-fluid">
        <div>
          <div>
            <img [src]="user.profilePictureLink" height="200px" alt=""/>
          </div>
          <div class="p-field">
            <div class="custom-file">
              <input type="file" class="custom-file-input" id="eventImage" name="ImageUrl"
                     #fileInput (change)="onFileChanged($event)">
              <label class="custom-file-label" for="eventImage">Choose Image</label>
            </div>
          </div>
<!--          <div class="p-field">-->
<!--            <label>First Name</label>-->
<!--            <input type="text" pInputText [(ngModel)]="user.FirstName" required autofocus />-->
<!--          </div>-->
<!--          <div class="p-field">-->
<!--            <label>Last Name</label>-->
<!--            <input type="text" pInputText [(ngModel)]="user.LastName" required  />-->
<!--          </div>-->
<!--          <div class="p-field">-->
<!--            <label>Username</label>-->
<!--            <input type="text" pInputText  [(ngModel)]="user.username" required  />-->
<!--          </div>-->
          <div class="p-field">
            <label>Password</label>
            <input type="password" pInputText [(ngModel)]="user.password" required  />
          </div>
          <div class="p-field">
            <label>Street Address</label>
            <input type="text" pInputText  [(ngModel)]="user.StreetAddress" required  />
          </div>
          <div class="p-field">
            <label>City</label>
            <input type="text" pInputText  [(ngModel)]="user.City" required  />
          </div>
          <div class="p-field">
            <label>Country</label>
            <input type="text" pInputText  [(ngModel)]="user.Country" required  />
          </div>
          <div class="p-field">
            <label>Zip Code</label>
            <input type="text" pInputText  [(ngModel)]="user.Zipcode" required  />
          </div>
<!--          <div class="p-field">-->
<!--            <label>Contact Number</label>-->
<!--            <input type="text" pInputText  [(ngModel)]="user.ContactNumber" required  />-->
<!--          </div>-->
<!--          <div class="p-field">-->
<!--            <label>Email </label>-->
<!--            <input type="email" pInputText  [(ngModel)]="user.Email" required  />-->
<!--          </div>-->
          <div class="p-field">
            <label>Select Preferences 1</label>
            <p-dropdown [(ngModel)]="user.Preference1"  [options]="Preferences" optionValue="value" placeholder="Preference 1">
              <ng-template let-option pTemplate="item">
                <span [class]="'product-badge status-' + option.value">{{option.label}}</span>
              </ng-template>
            </p-dropdown>
          </div>
          <div class="p-field">
            <label>Select Preferences 2</label>
            <p-dropdown [(ngModel)]="user.Preference2"  [options]="Preferences" optionValue="value" placeholder="Preference 2">
              <ng-template let-option pTemplate="item">
                <span [class]="'product-badge status-' + option.value">{{option.label}}</span>
              </ng-template>
            </p-dropdown>
          </div>
          <div class="p-field">
            <label>Select Preferences 3</label>
            <p-dropdown [(ngModel)]="user.Preference3"  [options]="Preferences" optionValue="value" placeholder="Preference 3">
              <ng-template let-option pTemplate="item">
                <span [class]="'product-badge status-' + option.value">{{option.label}}</span>
              </ng-template>
            </p-dropdown>
          </div>
        </div >
        <ng-template pTemplate="footer">
          <button pButton pRipple label="Cancel" icon="pi pi-times" class="p-button-text" (click)="hideDialog()"></button>
          <button pButton pRipple label="Save" icon="pi pi-check" class="p-button-text" (click)="editUser()"></button>
        </ng-template>
      </p-dialog>
      <p-confirmDialog [style]="{width: '450px'}"></p-confirmDialog>


    </div>
  </div>
</div>

